import { Injectable } from '@nestjs/common';
import { CreateItemDto } from '../models/create-item.dto';
import { Item } from '../models/item.model';
import { v4 as uuidv4 } from 'uuid';

@Injectable()
export class ItemsService {
    private items: Map<string, Item> = new Map();

    findAll(): Item[] {
        return Array.from(this.items.values());
    }

    findOne(id: string): Item | undefined {
        return this.items.get(id);
    }

    create(dto: CreateItemDto): Item {
        const item: Item = {
            id: uuidv4(),
            name: dto.name,
            description: dto.description,
            createdAt: new Date(),
        };
        this.items.set(item.id, item);
        return item;
    }

    remove(id: string): boolean {
        return this.items.delete(id);
    }
}